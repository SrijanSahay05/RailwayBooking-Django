{% extends "dashboard/base.html" %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">Ticket Details</h2>

    <!-- Ticket Information -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">Ticket Information</div>
        <div class="card-body">
            <p><strong>Ticket ID:</strong> {{ ticket.id }}</p>
            <p><strong>Booking User:</strong> {{ ticket.booking_user.username }}</p>
            <p><strong>Booking Date:</strong> {{ ticket.booking_date }}</p>
            <p><strong>Number of Seats:</strong> {{ ticket.num_seats }}</p>
            <p><strong>Total Price:</strong> ₹{{ ticket.price }}</p>
        </div>
    </div>

    <!-- Journey Information -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">Journey Information</div>
        <div class="card-body">
            <p><strong>Train Name:</strong> {{ ticket.journey.train.name }}</p>
            <p><strong>Train Number:</strong> {{ ticket.journey.train.number }}</p>
            <p><strong>Departure Station:</strong> {{ ticket.journey.train.departure_station.name }}</p>
            <p><strong>Arrival Station:</strong> {{ ticket.journey.train.arrival_station.name }}</p>
            <p><strong>Departure Date:</strong> {{ ticket.journey.departure_date.date }}</p>
            <p><strong>Departure Time:</strong> {{ ticket.journey.train.departure_time }}</p>
            <p><strong>Arrival Time:</strong> {{ ticket.journey.train.arrival_time }}</p>
            <p><strong>Journey Duration:</strong> {{ ticket.journey.train.calculate_journey_duration }}</p>
        </div>
    </div>

    <!-- Seat Category Information -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">Seat Category</div>
        <div class="card-body">
            <p><strong>Category Name:</strong> {{ ticket.journey_seat_category.seat_category.name }}</p>
            <p><strong>Total Seats:</strong> {{ ticket.journey_seat_category.total_seats }}</p>
            <p><strong>Available Seats:</strong> {{ ticket.journey_seat_category.available_seats }}</p>
            <p><strong>Base Price per Seat:</strong> ₹{{ ticket.journey_seat_category.base_price }}</p>
        </div>
    </div>

    <!-- Passenger Information -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">Passenger Information</div>
        <div class="card-body">
            {% if ticket.passengers.all %}
                <ul class="list-group">
                    {% for passenger in ticket.passengers.all %}
                        <li class="list-group-item">
                            <p><strong>Name:</strong> {{ passenger.name }}</p>
                            <p><strong>Age:</strong> {{ passenger.age }}</p>
                            <p><strong>Gender:</strong> {{ passenger.gender }}</p>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No passenger details available.</p>
            {% endif %}
        </div>
    </div>

    <!-- Back to My Tickets -->
    <div class="text-center">
        <a href="{% url 'my-tickets' %}" class="btn btn-secondary">Back to My Tickets</a>
    </div>
</div>
{% endblock %}
